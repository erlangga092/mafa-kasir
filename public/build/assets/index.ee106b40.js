import{r as o,R as e,H as se,d as Q}from"./app.ba9af926.js";import{s as le}from"./sweetalert2.all.305e775e.js";import{L as ne}from"./index.cfa3e07b.js";var l={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oe=o.exports,ce=Symbol.for("react.element"),de=Symbol.for("react.fragment"),ie=Object.prototype.hasOwnProperty,me=oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pe={key:!0,ref:!0,__self:!0,__source:!0};function J(t,s,a){var r,d={},m=null,u=null;a!==void 0&&(m=""+a),s.key!==void 0&&(m=""+s.key),s.ref!==void 0&&(u=s.ref);for(r in s)ie.call(s,r)&&!pe.hasOwnProperty(r)&&(d[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)d[r]===void 0&&(d[r]=s[r]);return{$$typeof:ce,type:t,key:m,ref:u,props:d,_owner:me.current}}B.Fragment=de;B.jsx=J;B.jsxs=J;(function(t){t.exports=B})(l);function ue(t,{insertAt:s}={}){if(!t||typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}ue(`.rmsc{--rmsc-main: #4285f4;--rmsc-hover: #f1f3f5;--rmsc-selected: #e2e6ea;--rmsc-border: #ccc;--rmsc-gray: #aaa;--rmsc-bg: #fff;--rmsc-p: 10px;--rmsc-radius: 4px;--rmsc-h: 38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px #0000001a,0 4px 11px #0000001a}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container[aria-disabled=true]:focus-within{box-shadow:var(--rmsc-gray) 0 0 0 1px;border-color:var(--rmsc-gray)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline-offset:-1px;outline-color:var(--rmsc-primary)}.rmsc .select-item:hover{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{background:none;height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0;font-size:1em}.rmsc .search input:focus{background:var(--rmsc-hover)}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p) / 2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}
`);var xe={allItemsAreSelected:"All items are selected.",clearSearch:"Clear Search",clearSelected:"Clear Selected",noOptions:"No options",search:"Search",selectAll:"Select All",selectAllFiltered:"Select All (Filtered)",selectSomeItems:"Select...",create:"Create"},he={value:[],hasSelectAll:!0,className:"multi-select",debounceDuration:200,options:[]},G=e.createContext({}),be=({props:t,children:s})=>{let[a,r]=o.exports.useState(t.options),d=m=>{var u;return((u=t.overrideStrings)==null?void 0:u[m])||xe[m]};return o.exports.useEffect(()=>{r(t.options)},[t.options]),l.exports.jsx(G.Provider,{value:{t:d,...he,...t,options:a,setOptions:r},children:s})},$=()=>e.useContext(G);function ve(t,s){let a=o.exports.useRef(!1);o.exports.useEffect(()=>{a.current?t():a.current=!0},s)}var fe={when:!0,eventTypes:["keydown"]};function M(t,s,a){let r=o.exports.useMemo(()=>Array.isArray(t)?t:[t],[t]),d=Object.assign({},fe,a),{when:m,eventTypes:u}=d,g=o.exports.useRef(s),{target:i}=d;o.exports.useEffect(()=>{g.current=s});let b=o.exports.useCallback(p=>{r.some(x=>p.key===x||p.code===x)&&g.current(p)},[r]);o.exports.useEffect(()=>{if(m&&typeof window<"u"){let p=i?i.current:window;return u.forEach(x=>{p&&p.addEventListener(x,b)}),()=>{u.forEach(x=>{p&&p.removeEventListener(x,b)})}}},[m,u,r,i,s])}var y={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter",ESCAPE:"Escape",SPACE:"Space"},ge=(t,s)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{t.apply(null,r)},s)}};function Ee(t,s){return s?t.filter(({label:a,value:r})=>a!=null&&r!=null&&a.toLowerCase().includes(s.toLowerCase())):t}var V=()=>l.exports.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray",children:[l.exports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.exports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ye=({checked:t,option:s,onClick:a,disabled:r})=>l.exports.jsxs("div",{className:`item-renderer ${r?"disabled":""}`,children:[l.exports.jsx("input",{type:"checkbox",onChange:a,checked:t,tabIndex:-1,disabled:r}),l.exports.jsx("span",{children:s.label})]}),Ne=ye,we=({itemRenderer:t=Ne,option:s,checked:a,tabIndex:r,disabled:d,onSelectionChanged:m,onClick:u})=>{let g=o.exports.useRef(),i=x=>{b(),x.preventDefault()},b=()=>{d||m(!a)},p=x=>{b(),u(x)};return M([y.ENTER,y.SPACE],i,{target:g}),l.exports.jsx("label",{className:`select-item ${a?"selected":""}`,role:"option","aria-selected":a,tabIndex:r,ref:g,children:l.exports.jsx(t,{option:s,checked:a,onClick:p,disabled:d})})},Y=we,Ce=({options:t,onClick:s,skipIndex:a})=>{let{disabled:r,value:d,onChange:m,ItemRenderer:u}=$(),g=(i,b)=>{r||m(b?[...d,i]:d.filter(p=>p.value!==i.value))};return l.exports.jsx(l.exports.Fragment,{children:t.map((i,b)=>{let p=b+a;return l.exports.jsx("li",{children:l.exports.jsx(Y,{tabIndex:p,option:i,onSelectionChanged:x=>g(i,x),checked:!!d.find(x=>x.value===i.value),onClick:x=>s(x,p),itemRenderer:u,disabled:i.disabled||r})},(i==null?void 0:i.key)||b)})})},Se=Ce,ke=()=>{let{t,onChange:s,options:a,setOptions:r,value:d,filterOptions:m,ItemRenderer:u,disabled:g,disableSearch:i,hasSelectAll:b,ClearIcon:p,debounceDuration:x,isCreatable:I,onCreateOption:C}=$(),S=o.exports.useRef(),E=o.exports.useRef(),[h,j]=o.exports.useState(""),[N,R]=o.exports.useState(a),[w,T]=o.exports.useState(""),[A,O]=o.exports.useState(0),P=o.exports.useCallback(ge(n=>T(n),x),[]),_=o.exports.useMemo(()=>{let n=0;return i||(n+=1),b&&(n+=1),n},[i,b]),D={label:t(h?"selectAllFiltered":"selectAll"),value:""},F=n=>{let f=N.filter(k=>!k.disabled).map(k=>k.value);if(n){let k=[...d.map(U=>U.value),...f];return(m?N:a).filter(U=>k.includes(U.value))}return d.filter(k=>!f.includes(k.value))},c=n=>{let f=F(n);s(f)},v=n=>{P(n.target.value),j(n.target.value),O(0)},L=()=>{var n;T(""),j(""),(n=E==null?void 0:E.current)==null||n.focus()},z=n=>O(n),Z=n=>{switch(n.code){case y.ARROW_UP:K(-1);break;case y.ARROW_DOWN:K(1);break;default:return}n.stopPropagation(),n.preventDefault()};M([y.ARROW_DOWN,y.ARROW_UP],Z,{target:S});let X=()=>{O(0)},H=async()=>{let n={label:h,value:h,__isNew__:!0};C&&(n=await C(h)),r([n,...a]),L(),s([...d,n])},ee=async()=>m?await m(a,w):Ee(a,w),K=n=>{let f=A+n;f=Math.max(0,f),f=Math.min(f,a.length+Math.max(_-1,0)),O(f)};o.exports.useEffect(()=>{var n,f;(f=(n=S==null?void 0:S.current)==null?void 0:n.querySelector(`[tabIndex='${A}']`))==null||f.focus()},[A]);let[te,re]=o.exports.useMemo(()=>{let n=N.filter(f=>!f.disabled);return[n.every(f=>d.findIndex(k=>k.value===f.value)!==-1),n.length!==0]},[N,d]);o.exports.useEffect(()=>{ee().then(R)},[w,a]);let q=o.exports.useRef();M([y.ENTER],H,{target:q});let ae=I&&h&&!N.some(n=>(n==null?void 0:n.value)===h);return l.exports.jsxs("div",{className:"select-panel",role:"listbox",ref:S,children:[!i&&l.exports.jsxs("div",{className:"search",children:[l.exports.jsx("input",{placeholder:t("search"),type:"text","aria-describedby":t("search"),onChange:v,onFocus:X,value:h,ref:E,tabIndex:0}),l.exports.jsx("button",{type:"button",className:"search-clear-button",hidden:!h,onClick:L,"aria-label":t("clearSearch"),children:p||l.exports.jsx(V,{})})]}),l.exports.jsxs("ul",{className:"options",children:[b&&re&&l.exports.jsx(Y,{tabIndex:_===1?0:1,checked:te,option:D,onSelectionChanged:c,onClick:()=>z(1),itemRenderer:u,disabled:g}),N.length?l.exports.jsx(Se,{skipIndex:_,options:N,onClick:(n,f)=>z(f)}):ae?l.exports.jsx("li",{onClick:H,className:"select-item creatable",tabIndex:1,ref:q,children:`${t("create")} "${h}"`}):l.exports.jsx("li",{className:"no-options",children:t("noOptions")})]})]})},je=ke,Re=({expanded:t})=>l.exports.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray",children:l.exports.jsx("path",{d:t?"M18 15 12 9 6 15":"M6 9L12 15 18 9"})}),Ae=()=>{let{t,value:s,options:a,valueRenderer:r}=$(),d=s.length===0,m=s.length===a.length,u=r&&r(s,a);return d?l.exports.jsx("span",{className:"gray",children:u||t("selectSomeItems")}):l.exports.jsx("span",{children:u||(m?t("allItemsAreSelected"):(()=>s.map(g=>g.label).join(", "))())})},Oe=({size:t=24})=>l.exports.jsx("span",{style:{width:t,marginRight:"0.2rem"},children:l.exports.jsx("svg",{width:t,height:t,className:"spinner",viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"},children:l.exports.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})})}),_e=()=>{let{t,onMenuToggle:s,ArrowRenderer:a,shouldToggleOnHover:r,isLoading:d,disabled:m,onChange:u,labelledBy:g,value:i,isOpen:b,defaultIsOpen:p,ClearSelectedIcon:x,closeOnChangedValue:I}=$();o.exports.useEffect(()=>{I&&h(!1)},[i]);let[C,S]=o.exports.useState(!0),[E,h]=o.exports.useState(p),[j,N]=o.exports.useState(!1),R=a||Re,w=o.exports.useRef();ve(()=>{s&&s(E)},[E]),o.exports.useEffect(()=>{p===void 0&&typeof b=="boolean"&&(S(!1),h(b))},[b]);let T=v=>{var L;["text","button"].includes(v.target.type)&&[y.SPACE,y.ENTER].includes(v.code)||(C&&(v.code===y.ESCAPE?(h(!1),(L=w==null?void 0:w.current)==null||L.focus()):h(!0)),v.preventDefault())};M([y.ENTER,y.ARROW_DOWN,y.SPACE,y.ESCAPE],T,{target:w});let A=v=>{C&&r&&h(v)},O=()=>!j&&N(!0),P=v=>{!v.currentTarget.contains(v.relatedTarget)&&C&&(N(!1),h(!1))},_=()=>A(!0),D=()=>A(!1),F=()=>{C&&h(d||m?!1:!E)},c=v=>{v.stopPropagation(),u([]),C&&h(!1)};return l.exports.jsxs("div",{tabIndex:0,className:"dropdown-container","aria-labelledby":g,"aria-expanded":E,"aria-readonly":!0,"aria-disabled":m,ref:w,onFocus:O,onBlur:P,onMouseEnter:_,onMouseLeave:D,children:[l.exports.jsxs("div",{className:"dropdown-heading",onClick:F,children:[l.exports.jsx("div",{className:"dropdown-heading-value",children:l.exports.jsx(Ae,{})}),d&&l.exports.jsx(Oe,{}),i.length>0&&x!==null&&l.exports.jsx("button",{type:"button",className:"clear-selected-button",onClick:c,disabled:m,"aria-label":t("clearSelected"),children:x||l.exports.jsx(V,{})}),l.exports.jsx(R,{expanded:E})]}),E&&l.exports.jsx("div",{className:"dropdown-content",children:l.exports.jsx("div",{className:"panel-content",children:l.exports.jsx(je,{})})})]})},Te=_e,Ie=t=>l.exports.jsx(be,{props:t,children:l.exports.jsx("div",{className:`rmsc ${t.className||"multi-select"}`,children:l.exports.jsx(Te,{})})}),Pe=Ie;const W=t=>isNaN(parseInt(t))?"":new Intl.NumberFormat("id-ID",{maximumSignificantDigits:5,style:"currency",currency:"IDR"}).format(t),We=({auth:t,carts:s,carts_total:a,session:r,customers:d})=>{const[m,u]=o.exports.useState(""),[g,i]=o.exports.useState(0),[b,p]=o.exports.useState(0),[x,I]=o.exports.useState(0),[C,S]=o.exports.useState(1),[E,h]=o.exports.useState(a),[j,N]=o.exports.useState([]),[R,w]=o.exports.useState({title:""}),T=d.map(c=>({label:c.name,value:c.id})),A=async()=>{try{const v=await(await fetch("/apps/transactions/searchProduct",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({barcode:m,_token:t.csrf})})).json();v.success?w(v.data):w({title:""})}catch(c){window.alert(c)}},O=()=>{Q.Inertia.post("/apps/transactions/add-to-cart",{product_id:R.id,qty:C,sell_price:R.sell_price},{onSuccess:({props:c})=>{w({title:""}),u(""),S(1),h(c.carts_total),i(0),p(0)}})},P=c=>{Q.Inertia.post("/apps/transactions/destroy-cart",{cart_id:c},{onSuccess:({props:v})=>{h(v.carts_total),i(0),p(0)}})},_=()=>{p(g-E)},D=()=>{h(a-x),i(0),p(0)},F=async()=>{try{const v=await(await fetch("/apps/transactions/store",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({_token:t.csrf,customer_id:j[0]?j[0].value:"",cash:g,change:b,discount:x,grand_total:E})})).json();w({title:""}),u(""),h(a),i(0),p(0),N([]),le.fire({title:"Success!",text:"Transaction successfully.",icon:"success",showConfirmButton:!1,timer:1e3}),window.location.href("/apps/dashboard")}catch(c){window.alert(c)}};return e.createElement(e.Fragment,null,e.createElement(se,null,e.createElement("title",null,"Transactions - Aplikasi Kasir")),e.createElement(ne,null,e.createElement("main",{className:"c-main"},e.createElement("div",{className:"container-fluid"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-4"},e.createElement("div",{className:"card border-0 rounded-3"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"input-group mb-3"},e.createElement("span",{className:"input-group-text"},e.createElement("i",{className:"fa fa-barcode"})),e.createElement("input",{type:"text",value:m,className:"form-control",placeholder:"Scan or input barcode",onChange:c=>u(c.target.value),onKeyUp:()=>A()})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"",className:"fw-bold"},"Product Name"),e.createElement("input",{type:"text",name:"title",className:"form-control",placeholder:"Product Name",value:R.title,readOnly:!0})),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"",className:"fw-bold"},"Qty"),e.createElement("input",{type:"number",className:"form-control text-center",placeholder:"Qty",min:"1",value:C,onChange:c=>S(c.target.value)})),e.createElement("div",{className:"text-end"},e.createElement("button",{className:"btn btn-warning btn-md border-0 shadow text-uppercase mt-3 me-2"},"CLEAR"),e.createElement("button",{className:`btn btn-primary btn-md border-0 shadow text-uppercase mt-3 me-2 ${R.id?"":"disabled"}`,onClick:()=>O()},"ADD ITEM"))))),e.createElement("div",{className:"col-md-8"},(r==null?void 0:r.error)&&e.createElement("div",{className:"alert alert-danger"},r==null?void 0:r.error),(r==null?void 0:r.success)&&e.createElement("div",{className:"alert alert-danger"},r==null?void 0:r.success),e.createElement("div",{className:"card border-0 rounded-3"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-4 col-4"},e.createElement("h5",{className:"fw-bold"},"GRAND TOTAL")),e.createElement("div",{className:"col-md-8 col-8 text-end"},e.createElement("h5",{className:"fw-bold"},W(E)),b>0&&e.createElement(e.Fragment,null,e.createElement("hr",null),e.createElement("h5",{className:"text-success"},"Change : ",e.createElement("strong",null,W(b)))))))),e.createElement("div",{className:"card border-0 rounded-3"},e.createElement("div",{className:"card-body"},e.createElement("div",{className:"row mb-3"},e.createElement("div",{className:"col-md-6"},e.createElement("label",{htmlFor:"",className:"fw-bold"},"Cashier"),e.createElement("input",{type:"text",className:"form-control",readOnly:!0,value:t.user.name})),e.createElement("div",{className:"col-md-6 float-end"},e.createElement("label",{htmlFor:"",className:"fw-bold"},"Customer"),e.createElement(Pe,{options:T,labelledBy:"Select",value:j,onChange:N}))),e.createElement("table",{className:"table table-bordered"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{scope:"col"},"#"),e.createElement("th",{scope:"col"},"Product Name"),e.createElement("th",{scope:"col"},"Price"),e.createElement("th",{scope:"col"},"Qty"),e.createElement("th",{scope:"col"},"Sub Totals"))),e.createElement("tbody",null,s==null?void 0:s.map(c=>e.createElement("tr",{key:c.id},e.createElement("td",{className:"text-center"},e.createElement("button",{className:"btn btn-danger btn-sm",onClick:()=>P(c.id)},e.createElement("i",{className:"fa fa-trash"}))),e.createElement("td",null,c.product.title),e.createElement("td",null,W(c.product.sell_price)),e.createElement("td",{className:"text-center"},c.qty),e.createElement("td",{className:"text-end"},W(c.price)))),e.createElement("tr",null,e.createElement("td",{colSpan:4,className:"text-end fw-bold",style:{backgroundColor:"#e6e6e7"}},"TOTAL"),e.createElement("td",{className:"text-end fw-bold",style:{backgroundColor:"#e6e6e7"}},W(a))))),e.createElement("div",{className:"d-flex align-items-end flex-column bd-highlight mb-3"},e.createElement("div",{className:"mt-auto bd-highlight"},e.createElement("label",{htmlFor:""},"Discount (Rp.)"),e.createElement("input",{type:"number",className:"form-control",placeholder:"Discount (Rp.)",onChange:c=>I(c.target.value),onKeyUp:()=>D()})),e.createElement("div",{className:"mt-4 bd-highlight"},e.createElement("label",{htmlFor:""},"Pay (Rp.)"),e.createElement("input",{type:"number",className:"form-control",placeholder:"Pay (Rp.)",onChange:c=>i(c.target.value),onKeyUp:()=>_()}))),e.createElement("div",{className:"text-end mt-4"},e.createElement("button",{className:"btn btn-warning btn-md border-0 shadow text-uppercase me-2"},"Cancel"),e.createElement("button",{className:"btn btn-purple btn-md border-0 shadow text-uppercase",onClick:()=>F()},"Pay Order & Print"))))))))))};export{We as default};
